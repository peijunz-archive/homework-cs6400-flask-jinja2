{% extends "base.html" %}

{% block title %}Resource Status{% endblock %}

{% block content %}
<div class="card form-card">
    <div class="card-header">
        <h3 class="panel-title">Resource Status</h3>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-striped">
                <caption>Resources In Use</caption>
                <thead class="thead-light">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Resource Name</th>
                    <th scope="col">Incident</th>
                    <th scope="col">Owner</th>
                    <th scope="col">Start Date</th>
                    <th scope="col">Return By</th>
                    <th scope="col">Action</th>
                </tr>
                </thead>
                <tbody>
                {% for it in inuse %}
                <tr>
                    <td scope="row">{{ it.ResourceID }}</td>
                    <td>{{ it.ResName }}</td>
                    <td>{{ it.IncDes }}</td>
                    <td>{{ it.OwnerName }}</td>
                    <td>{{ it.StartDate }}</td>
                    <td>{{ it.ReturnDate }}</td>
                    <td><button type="button" id='return{{ it.ResourceID }}' class="btn btn-secondary btn-return">Return</button></td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            <table class="table table-striped">
                <caption>Resources Requested by me</caption>
                <thead class="thead-light">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Resource Name</th>
                    <th scope="col">Incident</th>
                    <th scope="col">Owner</th>
                    <th scope="col">Return By</th>
                    <th scope="col">Action</th>
                </tr>
                </thead>
                <tbody>
                {% for it in requested %}
                <tr>
                    <td scope="row">{{ it.ResourceID }}</td>
                    <td>{{ it.ResName }}</td>
                    <td>{{ it.IncDes }}</td>
                    <td>{{ it.OwnerName }}</td>
                    <td>{{ it.ReturnDate }}</td>
                    <td><button type="button" id='cancel{{ it.ResourceID}}' class="btn btn-secondary btn-cancel">Cancel</button></td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            <table class="table table-striped">
                <caption>Resource Requests received by me</caption>
                <thead class="thead-light">
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Resource Name</th>
                    <th scope="col">Incident</th>
                    <th scope="col">Owner</th>
                    <th scope="col">Return By</th>
                    <th scope="col">Action</th>
                </tr>
                </thead>
                <tbody>
                {% for it in received %}
                <tr>
                    <td scope="row">{{ it.ResourceID }}</td>
                    <td>{{ it.ResName }}</td>
                    <td>{{ it.IncDes }}</td>
                    <td>{{ it.IncidentOwnerName }}</td>
                    <td>{{ it.ReturnDate }}</td>
                    <td>
                        <button id='deploy{{ it.ResourceID }}' class="btn btn-secondary btn-deploy"
                            data-id="{{ it.ResourceID }}" data-incident="{{ '%s (%s-%s)'%(it.IncDes, it.IncidentAbbrv, it.IncidentNumber) }}"
                                {%if it.InUse %}style="opacity:0;" disabled{% endif %}
                                type="button">Deploy</button>
                        <button type="button" id='{{ it.ID}}' class="btn btn-secondary btn-reject">Reject</button></td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
<script>

</script>
{% endblock %}
